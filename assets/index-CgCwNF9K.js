import{j as e,I as t,br as r,a2 as a,z as s,bg as i,a4 as n,an as o,ao as l,al as d,aP as u,X as c,bn as m,bk as x,bl as p,$ as h,J as b,bq as g,aV as f,E as j,_ as y,aq as C,bs as v,bt as T,bu as I,w as N,e as M}from"./mui-vendor-ThRJoe5u.js";import{r as q,f as R,j as S}from"./react-vendor-jVbyDP5c.js";import{C as k,g as A,h as D,i as w,j as L,k as z,l as W,f as G,F as H}from"./form-vendor-DG-ZRlco.js";import{o as O}from"./yup-lT2MYDzp.js";import{S as E}from"./utils-vendor-S0KZLiBE.js";import{e as $,f as P,g as B}from"./index-De03Ly_y.js";import"./auth-vendor-BOyMHjHL.js";import"./state-vendor-BxbV2bHq.js";import"./ui-vendor-DL_b4SbO.js";const V=({control:u,errors:c})=>e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(r,{sx:{mr:1,color:"#1976d2"}}),e.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Basic Information"})]}),e.jsx(s,{sx:{p:3,borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:{xs:12,md:6},children:e.jsx(k,{name:"chartId",control:u,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Chart ID",required:!0,placeholder:"e.g., CAT-CHT-001",helperText:c.chartId?.message||"Unique identifier for the catalyst chart",error:!!c.chartId,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12,md:6},children:e.jsx(k,{name:"chartSupplier",control:u,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Chart Supplier",required:!0,placeholder:"e.g., ABC Chemicals Ltd.",helperText:c.chartSupplier?.message||"Name of the chemical supplier",error:!!c.chartSupplier,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12,md:6},children:e.jsx(k,{name:"mekpDensity",control:u,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"MEKP Density",required:!0,type:"number",placeholder:"e.g., 1.12",helperText:c.mekpDensity?.message||"Methyl Ethyl Ketone Peroxide density (g/cm³)",error:!!c.mekpDensity,slotProps:{htmlInput:{step:"0.01",min:"0"}},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12,md:6},children:e.jsx(t,{sx:{display:"flex",alignItems:"center",height:"100%",pt:2},children:e.jsx(k,{name:"isActive",control:u,render:({field:r})=>e.jsx(o,{control:e.jsx(l,{checked:r.value,onChange:r.onChange,color:"primary"}),label:e.jsxs(t,{children:[e.jsx(a,{variant:"body1",sx:{fontWeight:500},children:"Active Status"}),e.jsx(a,{variant:"caption",sx:{color:"#666"},children:"Enable this chart for use in production"})]})})})})}),e.jsxs(i,{size:{xs:12},children:[e.jsx(d,{sx:{my:2}}),e.jsx(k,{name:"notes",control:u,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Notes",multiline:!0,rows:4,placeholder:"Additional notes about this catalyst chart",helperText:c.notes?.message||"Optional notes about usage, special conditions, or other relevant information",error:!!c.notes,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})]})})]}),K=A({id:L().optional(),catalystId:L().optional(),chartId:D().optional(),minTemperature:D().required("Minimum temperature is required").test("is-valid-number","Minimum temperature must be a valid number >= -50°C",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>=-50}),maxTemperature:D().required("Maximum temperature is required").test("is-valid-number","Maximum temperature must be a valid number <= 100°C",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t<=100}),minHumidity:D().required("Minimum humidity is required").test("is-valid-number","Minimum humidity must be a valid number >= 0%",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>=0}),maxHumidity:D().required("Maximum humidity is required").test("is-valid-number","Maximum humidity must be a valid number <= 100%",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t<=100}),minGelcoat:D().required("Minimum gelcoat is required").test("is-valid-number","Minimum gelcoat must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),maxGelcoat:D().required("Maximum gelcoat is required").test("is-valid-number","Maximum gelcoat must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),gelcoatLabel:D().optional().max(100,"Gelcoat label must be less than 100 characters"),minResinDosage:D().required("Minimum resin dosage is required").test("is-valid-number","Minimum resin dosage must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),maxResinDosage:D().required("Maximum resin dosage is required").test("is-valid-number","Maximum resin dosage must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),resinLabel:D().optional().max(100,"Resin label must be less than 100 characters"),minTopCoat:D().required("Minimum top coat is required").test("is-valid-number","Minimum top coat must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),maxTopCoat:D().required("Maximum top coat is required").test("is-valid-number","Maximum top coat must be a valid number > 0",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0}),topCoatLabel:D().optional().max(100,"Top coat label must be less than 100 characters"),blockCatalystMixing:w(),requestSupervisorApproval:w(),createdAt:D().optional(),updatedAt:D().optional()}).test("min-max-validation","Minimum values must be less than or equal to maximum values",function(e){const{minTemperature:t,maxTemperature:r,minHumidity:a,maxHumidity:s,minGelcoat:i,maxGelcoat:n,minResinDosage:o,maxResinDosage:l,minTopCoat:d,maxTopCoat:u}=e,c=Number(t),m=Number(r),x=Number(a),p=Number(s),h=Number(i),b=Number(n),g=Number(o),f=Number(l),j=Number(d),y=Number(u);return!(c>m||x>p||h>b||g>f||j>y)||this.createError({path:"minTemperature",message:"Minimum values must be less than or equal to maximum values"})}),F=A({id:L().optional(),chartId:D().required("Chart ID is required").min(3,"Chart ID must be at least 3 characters").max(50,"Chart ID must be less than 50 characters").matches(/^[A-Z0-9-]+$/,"Chart ID must contain only uppercase letters, numbers, and hyphens"),chartSupplier:D().required("Chart supplier is required").min(2,"Chart supplier must be at least 2 characters").max(100,"Chart supplier must be less than 100 characters"),notes:D().max(500,"Notes must be less than 500 characters").optional(),mekpDensity:D().required("MEKP density is required").test("is-valid-density","MEKP density must be a valid number between 0 and 10 g/cm³",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0&&t<=10}),isActive:w(),catalystConfiguration:z(K).min(1,"At least one configuration is required"),createdAt:D().optional(),updatedAt:D().optional()}),U={minTemperature:"",maxTemperature:"",minHumidity:"",maxHumidity:"",minGelcoat:"",maxGelcoat:"",gelcoatLabel:"",minResinDosage:"",maxResinDosage:"",resinLabel:"",minTopCoat:"",maxTopCoat:"",topCoatLabel:"",blockCatalystMixing:!1,requestSupervisorApproval:!1},Z={chartId:"",chartSupplier:"",notes:"",mekpDensity:"",isActive:!0,catalystConfiguration:[U]};A({chartId:D().required("Chart ID is required").min(3,"Chart ID must be at least 3 characters").max(50,"Chart ID must be less than 50 characters").matches(/^[A-Z0-9-]+$/,"Chart ID must contain only uppercase letters, numbers, and hyphens"),chartSupplier:D().required("Chart supplier is required").min(2,"Chart supplier must be at least 2 characters").max(100,"Chart supplier must be less than 100 characters"),notes:D().max(500,"Notes must be less than 500 characters").optional(),mekpDensity:D().required("MEKP density is required").test("is-valid-density","MEKP density must be a valid number between 0 and 10 g/cm³",e=>{if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0&&t<=10}),isActive:w()}),A({catalystConfiguration:z(K).min(1,"At least one configuration is required")});const J=({control:r,errors:C})=>{const[v,T]=q.useState(new Set([0])),[I,N]=q.useState(new Set),{fields:M,append:R,remove:S}=W({control:r,name:"catalystConfiguration"}),A=q.useMemo(()=>{const e=new Set(v);return M.length>0&&!I.has(0)&&!e.has(0)&&e.add(0),C.catalystConfiguration&&Array.isArray(C.catalystConfiguration)&&C.catalystConfiguration.forEach((t,r)=>{t&&Object.keys(t).length>0&&!I.has(r)&&e.add(r)}),e},[C.catalystConfiguration,I,M.length,v]),D=()=>{R(U);const e=M.length;T(t=>new Set([...t,e]))},w=(s,c)=>{const m=A.has(c),q=0===c,R=C.catalystConfiguration?.[c],D=I.has(c),w=R&&Object.keys(R).length>0,L=m||w&&!D||q&&!D;return e.jsx(x,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:e.jsxs(p,{sx:{pb:L?2:1},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(u,{sx:{mr:1,color:"#1976d2"}}),e.jsxs(a,{variant:"h6",sx:{fontWeight:600},children:["Configuration ",c+1]}),q&&e.jsx(h,{severity:"info",sx:{ml:2,py:0,fontSize:"0.75rem"},children:"Default Configuration"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[M.length>1&&e.jsx(b,{onClick:()=>(e=>{S(e);const t=new Set,r=new Set;v.forEach(r=>{r<e?t.add(r):r>e&&t.add(r-1)}),I.forEach(t=>{t<e?r.add(t):t>e&&r.add(t-1)}),T(t),N(r)})(c),color:"error",size:"small",sx:{mr:1},children:e.jsx(g,{})}),e.jsx(b,{onClick:()=>(e=>{const t=new Set(v),r=new Set(I);t.has(e)?(t.delete(e),r.add(e)):(t.add(e),r.delete(e)),T(t),N(r)})(c),size:"small",children:L?e.jsx(f,{}):e.jsx(j,{})})]})]}),e.jsxs(y,{in:L,children:[e.jsx(d,{sx:{my:2}}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"#555"},children:"Temperature Range (°C)"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.minTemperature`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Min Temperature",type:"number",required:!0,placeholder:"e.g., 20",error:!!R?.minTemperature,helperText:R?.minTemperature?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.maxTemperature`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Max Temperature",type:"number",required:!0,placeholder:"e.g., 35",error:!!R?.maxTemperature,helperText:R?.maxTemperature?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"#555"},children:"Humidity Range (%)"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.minHumidity`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Min Humidity",type:"number",required:!0,placeholder:"e.g., 40",error:!!R?.minHumidity,helperText:R?.minHumidity?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.maxHumidity`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Max Humidity",type:"number",required:!0,placeholder:"e.g., 65",error:!!R?.maxHumidity,helperText:R?.maxHumidity?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"#555"},children:"Gelcoat Settings"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.minGelcoat`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Min Gelcoat",type:"number",required:!0,placeholder:"e.g., 1.5",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.minGelcoat,helperText:R?.minGelcoat?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.maxGelcoat`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Max Gelcoat",type:"number",required:!0,placeholder:"e.g., 2.5",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.maxGelcoat,helperText:R?.maxGelcoat?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(k,{name:`catalystConfiguration.${c}.gelcoatLabel`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Gelcoat Label",placeholder:"e.g., Standard Gelcoat Mix",error:!!R?.gelcoatLabel,helperText:R?.gelcoatLabel?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"#555"},children:"Resin Settings"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.minResinDosage`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Min Resin Dosage",type:"number",required:!0,placeholder:"e.g., 0.8",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.minResinDosage,helperText:R?.minResinDosage?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.maxResinDosage`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Max Resin Dosage",type:"number",required:!0,placeholder:"e.g., 1.2",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.maxResinDosage,helperText:R?.maxResinDosage?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(k,{name:`catalystConfiguration.${c}.resinLabel`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Resin Label",placeholder:"e.g., General Purpose Resin",error:!!R?.resinLabel,helperText:R?.resinLabel?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"#555"},children:"Top Coat Settings"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.minTopCoat`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Min Top Coat",type:"number",required:!0,placeholder:"e.g., 0.5",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.minTopCoat,helperText:R?.minTopCoat?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.maxTopCoat`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Max Top Coat",type:"number",required:!0,placeholder:"e.g., 1.0",slotProps:{htmlInput:{step:"0.1"}},error:!!R?.maxTopCoat,helperText:R?.maxTopCoat?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(k,{name:`catalystConfiguration.${c}.topCoatLabel`,control:r,render:({field:t})=>e.jsx(n,{...t,fullWidth:!0,label:"Top Coat Label",placeholder:"e.g., Premium Top Coat Finish",error:!!R?.topCoatLabel,helperText:R?.topCoatLabel?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(i,{size:{xs:12},children:e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:600,color:"#555"},children:"Safety & Approval Settings"})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.blockCatalystMixing`,control:r,render:({field:t})=>e.jsx(o,{control:e.jsx(l,{checked:t.value,onChange:t.onChange,color:"warning"}),label:"Block Catalyst Mixing"})})}),e.jsx(i,{size:{xs:6},children:e.jsx(k,{name:`catalystConfiguration.${c}.requestSupervisorApproval`,control:r,render:({field:t})=>e.jsx(o,{control:e.jsx(l,{checked:t.value,onChange:t.onChange,color:"primary"}),label:"Request Supervisor Approval"})})})]})]})]})},c)};return e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(u,{sx:{mr:1,color:"#1976d2"}}),e.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Configuration Settings"})]}),e.jsx(c,{variant:"outlined",startIcon:e.jsx(m,{}),onClick:D,sx:{textTransform:"none",borderRadius:"8px",borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:"Add Configuration"})]}),e.jsx(s,{sx:{p:3,borderRadius:2,border:"1px solid #e0e0e0"},children:0===M.length?e.jsxs(t,{sx:{textAlign:"center",py:4},children:[e.jsx(u,{sx:{fontSize:48,color:"#ccc",mb:2}}),e.jsx(a,{variant:"h6",sx:{color:"#666",mb:1},children:"No configurations added yet"}),e.jsx(a,{variant:"body2",sx:{color:"#999",mb:3},children:"Add at least one configuration to define temperature and humidity ranges"}),e.jsx(c,{variant:"contained",startIcon:e.jsx(m,{}),onClick:D,sx:{textTransform:"none",backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:"Add First Configuration"})]}):e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{color:"#666",mb:3},children:"Define different configurations for various temperature and humidity conditions. Each configuration specifies dosage ranges and safety settings."}),M.map((e,t)=>w(0,t))]})})]})},X=["Basic Information","Configuration Settings"],_=()=>{const r=R(),{id:i}=S(),n=Boolean(i),[o,l]=q.useState(0),[d,u]=q.useState(null),{data:m,isLoading:x,isSuccess:p}=$({id:Number(i)},{skip:!n||!i}),[b,{isLoading:g}]=P(),[f,{isLoading:j}]=B(),y=G({resolver:O(F),defaultValues:Z,mode:"onChange",reValidateMode:"onChange"}),{control:k,handleSubmit:A,formState:{errors:D},reset:w,trigger:L}=y;q.useEffect(()=>{Object.keys(D).length},[D]),q.useEffect(()=>{if(n&&p&&m){const e={id:m.detail.catalyst.id,chartId:m.detail.catalyst.chartId,chartSupplier:m.detail.catalyst.chartSupplier,notes:m.detail.catalyst.notes||"",mekpDensity:m.detail.catalyst.mekpDensity,isActive:"ACTIVE"===m.detail.catalyst.status,catalystConfiguration:m.detail.catalystConfiguration.map(e=>({...e,gelcoatLabel:e.gelcoatLabel||"",topCoatLabel:e.topCoatLabel||"",minTopCoat:e.minTopCoat||"",maxTopCoat:e.maxTopCoat||""})),createdAt:m.detail.catalyst.createdAt,updatedAt:m.detail.catalyst.updatedAt};w(e)}},[n,p,m,w]);return n&&x?e.jsx(t,{sx:{minHeight:"100vh"},children:e.jsxs(s,{sx:{p:4,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(C,{variant:"rectangular",width:80,height:36,sx:{mr:2,borderRadius:1}}),e.jsx(C,{variant:"text",width:300,height:40})]}),e.jsx(t,{sx:{mb:4},children:e.jsx(C,{variant:"rectangular",width:"100%",height:60,sx:{borderRadius:1}})}),e.jsx(t,{sx:{mb:4},children:e.jsx(C,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:1}})}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",pt:3,borderTop:"1px solid #e0e0e0"},children:[e.jsx(C,{variant:"rectangular",width:80,height:36,sx:{borderRadius:1}}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(C,{variant:"rectangular",width:100,height:36,sx:{borderRadius:1}}),e.jsx(C,{variant:"rectangular",width:120,height:36,sx:{borderRadius:1}})]})]})]})}):e.jsx(H,{...y,children:e.jsx(t,{sx:{minHeight:"100vh"},children:e.jsxs(s,{sx:{p:4,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx(t,{sx:{display:"flex",alignItems:"center",mb:4},children:e.jsx(a,{variant:"h4",sx:{fontWeight:600,color:"#333"},children:n?"Edit Catalyst Chart":"Create New Catalyst Chart"})}),d&&e.jsx(h,{severity:"error",sx:{mb:3},children:d}),e.jsx(t,{sx:{mb:4},children:e.jsx(v,{activeStep:o,alternativeLabel:!0,children:X.map(t=>e.jsx(T,{children:e.jsx(I,{children:t})},t))})}),e.jsx(t,{sx:{mb:4},children:(t=>{switch(t){case 0:return e.jsx(V,{control:k,errors:D});case 1:return e.jsx(J,{control:k,errors:D});default:return null}})(o)}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",pt:3,borderTop:"1px solid #e0e0e0"},children:[e.jsx(c,{onClick:()=>{0===o?r("/catalyst-master"):l(e=>e-1)},sx:{textTransform:"none"},children:"Back"}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(c,{variant:"outlined",startIcon:e.jsx(N,{}),onClick:()=>{r("/catalyst-master")},sx:{textTransform:"none"},children:"Cancel"}),o===X.length-1?e.jsx(c,{variant:"contained",startIcon:e.jsx(M,{}),onClick:A(async e=>{u(null);try{if(!(await L()))return void u("Please fix all validation errors before submitting");const t={status:e.isActive?"ACTIVE":"INACTIVE",chartId:e.chartId,chartSupplier:e.chartSupplier,notes:e.notes||"",mekpDensity:Number(e.mekpDensity),isActive:e.isActive??!0},a=(e.catalystConfiguration||[]).map(e=>({minTemperature:Number(e.minTemperature),maxTemperature:Number(e.maxTemperature),minHumidity:Number(e.minHumidity),maxHumidity:Number(e.maxHumidity),minGelcoat:Number(e.minGelcoat),maxGelcoat:Number(e.maxGelcoat),gelcoatLabel:e.gelcoatLabel||"",minResinDosage:Number(e.minResinDosage),maxResinDosage:Number(e.maxResinDosage),resinLabel:e.resinLabel||"",minTopCoat:e.minTopCoat?Number(e.minTopCoat):0,maxTopCoat:e.maxTopCoat?Number(e.maxTopCoat):0,topCoatLabel:e.topCoatLabel||"",blockCatalystMixing:e.blockCatalystMixing??!1,requestSupervisorApproval:e.requestSupervisorApproval??!1}));if(n&&e.id){const r={id:e.id,catalyst:{id:e.id,version:m?m.detail.catalyst.version:1,...t},catalystConfiguration:a};await f(r).unwrap(),E.fire({icon:"success",title:"Success!",text:"Catalyst chart updated successfully",timer:2e3,showConfirmButton:!1})}else{const e={catalyst:t,catalystConfiguration:a};await b(e).unwrap(),E.fire({icon:"success",title:"Success!",text:"Catalyst chart created successfully",timer:2e3,showConfirmButton:!1})}r("/catalyst-master")}catch(t){const e=t&&"object"==typeof t&&"data"in t&&t.data&&"object"==typeof t.data&&"message"in t.data?t.data.message:t&&"object"==typeof t&&"message"in t?t.message:`Failed to ${n?"update":"create"} catalyst`;u(e)}}),disabled:g||j,sx:{textTransform:"none",backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:g||j?"Saving...":n?"Update Chart":"Create Chart"}):e.jsx(c,{variant:"contained",onClick:async()=>{const e={0:["chartId","chartSupplier","mekpDensity","isActive","notes"],1:["catalystConfiguration"]}[o];if(e)try{if(await L([...e]))l(e=>e+1);else{const e=document.querySelector(".Mui-error");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}catch(t){}else l(e=>e+1)},sx:{textTransform:"none",backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:"Next"})]})]})]})})})};export{_ as default};
