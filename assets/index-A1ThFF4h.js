import{j as e,I as r,a2 as s,X as o,bn as t,aR as i,bh as a,bV as n,bW as l,bk as d,bl as c,a4 as x,a5 as u,d as h,y as p,Z as m,ab as b,bc as f,ad as j,ae as g,J as C,r as S,af as v,bX as I,bg as y,b3 as z,a6 as E,a7 as w,a8 as R,aA as P,al as k,bY as T,az as M,ag as A}from"./mui-vendor-ThRJoe5u.js";import{r as D,f as W}from"./react-vendor-jVbyDP5c.js";import{T as N,C as O}from"./CatalystTableSkeleton-BjboBL1o.js";import{o as L,a as q,b as V,G as Y,H as G,A as K,I as _}from"./index-De03Ly_y.js";import{f as F,C as $,g as B,h as H,j as U}from"./form-vendor-DG-ZRlco.js";import{o as X}from"./yup-lT2MYDzp.js";import"./table-vendor-Bx02c7my.js";import"./auth-vendor-BOyMHjHL.js";import"./state-vendor-BxbV2bHq.js";import"./utils-vendor-S0KZLiBE.js";import"./ui-vendor-DL_b4SbO.js";const J=({onCreateClick:i})=>e.jsx(r,{sx:{mb:4},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsxs(r,{children:[e.jsx(s,{variant:"h3",sx:{fontWeight:600,color:"#333",mb:1,fontSize:"2rem"},children:"PRC Execution"}),e.jsx(s,{variant:"body1",sx:{color:"#666",fontSize:"1rem",fontWeight:400},children:"Manage and monitor production run control executions"})]}),e.jsx(o,{variant:"contained",startIcon:e.jsx(t,{}),onClick:i,sx:{backgroundColor:"#1976d2",color:"white",borderRadius:"8px",px:3,py:1.5,textTransform:"none",fontSize:"0.875rem",fontWeight:500,"&:hover":{backgroundColor:"#1565c0"}},children:"Create PRC Execution"})]})}),Z=({headerData:o})=>{const t=[{title:"Total Executions",value:o.ACTIVE+o.INACTIVE+o.IN_PROGRESS+o.COMPLETED,subtitle:`${o.ACTIVE} active executions`,icon:e.jsx(i,{sx:{color:"#666",fontSize:"1.5rem",opacity:.7}})},{title:"Active Executions",value:o.ACTIVE,subtitle:"Currently running",icon:e.jsx(a,{sx:{color:"#4caf50",fontSize:"1.5rem",opacity:.8}})},{title:"In Progress",value:o.IN_PROGRESS,subtitle:"Being executed",icon:e.jsx(n,{sx:{color:"#2196f3",fontSize:"1.5rem",opacity:.8}})},{title:"Completed",value:o.COMPLETED,subtitle:"Successfully finished",icon:e.jsx(l,{sx:{color:"#4caf50",fontSize:"1.5rem",opacity:.8}})}];return e.jsx(r,{sx:{display:"flex",gap:3,mb:4},children:t.map((o,t)=>e.jsx(d,{sx:{flex:1,borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 16px rgba(0,0,0,0.15)"}},children:e.jsx(c,{sx:{p:3,position:"relative"},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{color:"#666",mb:1,fontSize:"0.875rem",fontWeight:500},children:o.title}),e.jsx(s,{variant:"h4",sx:{fontWeight:600,color:"#333",fontSize:"2rem",mb:.5},children:o.value}),e.jsx(s,{variant:"caption",sx:{color:"#999",fontSize:"0.75rem"},children:o.subtitle})]}),e.jsx(r,{sx:{opacity:.7,transition:"opacity 0.2s ease-in-out","&:hover":{opacity:1}},children:o.icon})]})})},t))})},Q=({onSearchChange:t,onFilterChange:a})=>{const[n,l]=D.useState("All Executions"),[d,c]=D.useState("");return e.jsxs(r,{sx:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",mb:3},children:[e.jsxs(r,{sx:{p:3,borderBottom:"1px solid #e0e0e0"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(i,{sx:{color:"#666",mr:1,fontSize:"1.25rem"}}),e.jsx(s,{variant:"h5",sx:{fontWeight:600,color:"#333",fontSize:"1.25rem"},children:"Execution Management"})]}),e.jsx(s,{variant:"body2",sx:{color:"#666",fontSize:"0.875rem"},children:"Search and filter executions by status, part number, customer, or production details"})]}),e.jsxs(r,{sx:{p:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(x,{placeholder:"Search by Part Number, Customer, Production Set, or Mould ID",variant:"outlined",size:"small",value:d,onChange:e=>{const r=e.target.value;c(r),t?.(r)},InputProps:{startAdornment:e.jsx(u,{position:"start",children:e.jsx(h,{sx:{color:"#999"}})})},sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:"8px",backgroundColor:"#fafafa","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#ccc"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}},"& .MuiInputBase-input":{fontSize:"0.875rem",color:"#666","&::placeholder":{color:"#999",opacity:1}}}}),e.jsx(p,{direction:"row",spacing:1,children:["All Executions","ACTIVE","INPROGRESS","COMPLETED","INACTIVE"].map(r=>e.jsx(o,{variant:n===r?"contained":"outlined",onClick:()=>(e=>{l(e),a?.(e)})(r),sx:{borderRadius:"8px",textTransform:"none",fontSize:"0.875rem",fontWeight:500,px:2,py:1,minWidth:"auto",...n===r?{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#1565c0"}}:{color:"#666",borderColor:"#e0e0e0","&:hover":{borderColor:"#ccc",backgroundColor:"#f5f5f5"}}},children:r},r))})]})]})},ee=D.memo(({data:t,onExecute:n})=>{const l=t||[],d=e=>{switch(e){case"ACTIVE":case"COMPLETED":return"#4caf50";case"IN_PROGRESS":return"#2196f3";default:return"#9e9e9e"}},c=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),x=e=>e>=100?"#4caf50":e>=50?"#ff9800":"#2196f3",u=D.useMemo(()=>[{accessorKey:"id",header:"ID",size:80,Cell:({row:r})=>e.jsxs(s,{variant:"body2",sx:{fontWeight:600,color:"#1976d2",fontSize:"0.875rem"},children:["#",r.original.id]})},{accessorKey:"partNumber",header:"Part Number",size:200,Cell:({row:o})=>e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500,color:"#333",fontSize:"0.875rem"},children:o.original.partNumber}),e.jsx(s,{variant:"caption",sx:{color:"#999",fontSize:"0.75rem",display:"block"},children:o.original.updatedAt?`Updated: ${c(o.original.updatedAt)}`:""}),e.jsx(m,{label:`v${o.original.version}`,size:"small",icon:e.jsx(i,{sx:{fontSize:"0.75rem"}}),sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontSize:"0.625rem",height:"20px",mt:.5}})]})},{accessorKey:"customer",header:"Customer",size:150,Cell:({row:r})=>e.jsx(s,{variant:"body2",sx:{color:"#666",fontSize:"0.875rem"},children:r.original.customer})},{accessorKey:"productionDetails",header:"Production Details",size:200,Cell:({row:o})=>e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsxs(s,{variant:"caption",sx:{fontSize:"0.75rem",color:"#666"},children:["Set: ",o.original.productionSetId]}),e.jsxs(s,{variant:"caption",sx:{fontSize:"0.75rem",color:"#666"},children:["Mould: ",o.original.mouldId]}),e.jsxs(s,{variant:"caption",sx:{fontSize:"0.75rem",color:"#666"},children:["Shift: ",o.original.shift]})]})},{accessorKey:"progress",header:"Progress",size:150,Cell:({row:o})=>{const t=(e=>{const r="string"==typeof e.progress?parseInt(e.progress)||0:e.progress;return Math.min(100,Math.max(0,r))})(o.original);return e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{variant:"determinate",value:t,sx:{flex:1,height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{backgroundColor:x(t),borderRadius:4}}}),e.jsxs(s,{variant:"caption",sx:{fontSize:"0.75rem",fontWeight:500,color:x(t)},children:[t,"%"]})]}),e.jsxs(s,{variant:"caption",sx:{fontSize:"0.75rem",color:"#666"},children:[o.original.stepsCompleted||0," of ",o.original.totalSteps||0," steps"]})]})}},{accessorKey:"status",header:"Status",size:120,Cell:({row:r})=>e.jsx(m,{label:r.original.status,icon:e.jsx(a,{sx:{fontSize:"0.75rem"}}),sx:{backgroundColor:d(r.original.status),color:"white",fontSize:"0.75rem",height:"24px","& .MuiChip-icon":{color:"white"}}})},{accessorKey:"date",header:"Date",size:120,Cell:({row:r})=>e.jsx(s,{variant:"body2",sx:{color:"#333",fontSize:"0.875rem"},children:c(r.original.date)})},{id:"execute",header:"Execute",size:120,enableSorting:!1,Cell:({row:r})=>e.jsx(o,{variant:"contained",startIcon:e.jsx(i,{}),onClick:()=>n(r.original.id),size:"small",sx:{backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:"Execute"})}],[n]);return 0===l.length?e.jsxs(r,{sx:{textAlign:"center",py:8},children:[e.jsx(i,{sx:{fontSize:64,color:"#ccc",mb:2}}),e.jsx(s,{variant:"h6",sx:{color:"#666",mb:1},children:"No PRC Executions Found"}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"Create your first PRC execution to get started"})]}):e.jsx(N,{tableColumns:u,data:l})});ee.displayName="PrcExecutionTable";const re=B({customer:H().required("Customer is required"),partId:U().required("Part selection is required"),plantCode:H().required("Plant selection is required"),productionSetId:H().required("Production Set ID is required"),mouldId:H().required("Mould ID is required"),date:H().required("Date is required"),shift:H().required("Shift is required"),inCharge:U().required("In Charge is required"),remarks:H().optional().default("")}),se=[{value:"Morning",label:"Morning"},{value:"Afternoon",label:"Afternoon"},{value:"Night",label:"Night"}],oe=({open:t,onClose:l,onSuccess:u})=>{const[h,p]=D.useState(null),[b,W]=D.useState(""),[N,O]=D.useState(null),[_,B]=D.useState(!1),[H,U]=D.useState(L()),{data:J}=q(),{data:Z,isLoading:Q}=V({customerCode:b},{skip:!b}),{data:ee}=Y(),[oe,{isLoading:te}]=G(),{control:ie,handleSubmit:ae,reset:ne,watch:le,setValue:de,formState:{errors:ce}}=F({resolver:X(re),defaultValues:{customer:"",partId:0,plantCode:"",productionSetId:"",mouldId:"",date:(new Date).toISOString().split("T")[0],shift:"Morning",inCharge:1,remarks:""}}),xe=le("customer");D.useEffect(()=>{t&&(ne(),p(null),W(""),O(null),U(L()))},[t,ne]),D.useEffect(()=>{xe&&W(xe)},[xe]);const ue=()=>{te||_||l()};return e.jsx(f,{dateAdapter:K,children:e.jsxs(j,{open:t,onClose:ue,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}},children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:2,borderBottom:"1px solid #e0e0e0"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(i,{sx:{color:"#1976d2",fontSize:"1.5rem"}}),e.jsxs(r,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Create PRC Execution"}),e.jsx(s,{variant:"body2",sx:{color:"#666"},children:"Initiate a new production run control execution"})]})]}),e.jsx(C,{onClick:ue,size:"small",disabled:te||_,sx:{color:"#666"},children:e.jsx(S,{})})]}),e.jsxs(v,{sx:{pt:3,pb:2},children:[_&&e.jsx(r,{sx:{mb:3,p:2,backgroundColor:"#f5f5f5",borderRadius:"8px",border:"1px solid #e0e0e0"},children:e.jsx(s,{variant:"body2",sx:{color:"#666"},children:"Creating PRC Execution..."})}),e.jsxs(r,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(d,{sx:{borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",mt:2},children:e.jsxs(c,{sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(I,{sx:{color:"#666",mr:2,fontSize:"1.25rem"}}),e.jsxs(r,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Part, Customer & Plant Selection"}),e.jsx(s,{variant:"body2",sx:{color:"#666"},children:"Choose the customer, part, and plant for this execution"})]})]}),e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:4},children:e.jsx($,{name:"customer",control:ie,render:({field:r})=>e.jsxs(z,{fullWidth:!0,error:!!ce.customer,children:[e.jsx(E,{children:"Customer"}),e.jsx(w,{...r,label:"Customer",disabled:te||_,sx:{borderRadius:"8px"},children:J?.data?.map(r=>e.jsx(R,{value:r.value,children:r.label},r.value))}),ce.customer&&e.jsx(s,{variant:"caption",color:"error",sx:{mt:.5,ml:1.75},children:ce.customer.message})]})})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsx(P,{options:Z?.data||[],getOptionLabel:e=>e.label,value:h,onChange:(e,r)=>{return p(s=r),void(s&&de("partId",s.value));var s},loading:Q,disabled:!b||te||_,renderInput:r=>e.jsx(x,{...r,label:"Part",error:!!ce.partId,helperText:ce.partId?.message||"Select a part for this execution",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),renderOption:(o,t)=>e.jsx("li",{...o,children:e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:t.label}),e.jsx(s,{variant:"caption",color:"textSecondary",children:t.data.description})]})})})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsx(P,{options:ee?.data||[],getOptionLabel:e=>e.label,value:N,onChange:(e,r)=>{return O(s=r),void(s&&de("plantCode",s.value));var s},disabled:te||_,renderInput:r=>e.jsx(x,{...r,label:"Plant",error:!!ce.plantCode,helperText:ce.plantCode?.message||"Select a plant for this execution",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),renderOption:(r,o)=>e.jsx("li",{...r,children:e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:o.label})})})})]})]})}),h&&e.jsx(d,{sx:{borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(c,{sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(a,{sx:{color:"#4caf50",mr:2,fontSize:"1.25rem"}}),e.jsxs(r,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Part Selected Successfully"}),e.jsxs(s,{variant:"body2",sx:{color:"#666"},children:[h.data.partNumber," - ",h.data.description]})]})]}),e.jsx(k,{sx:{my:2}}),e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{size:{xs:6,sm:3},children:e.jsxs(r,{sx:{textAlign:"center",p:1},children:[e.jsx(s,{variant:"caption",color:"textSecondary",sx:{display:"block",mb:.5},children:"Part Number"}),e.jsx(m,{label:h.data.partNumber,size:"small",sx:{fontWeight:600}})]})}),e.jsx(y,{size:{xs:6,sm:3},children:e.jsxs(r,{sx:{textAlign:"center",p:1},children:[e.jsx(s,{variant:"caption",color:"textSecondary",sx:{display:"block",mb:.5},children:"Version"}),e.jsx(m,{label:`v${h.data.version}`,size:"small",sx:{fontWeight:600}})]})}),e.jsx(y,{size:{xs:6,sm:3},children:e.jsxs(r,{sx:{textAlign:"center",p:1},children:[e.jsx(s,{variant:"caption",color:"textSecondary",sx:{display:"block",mb:.5},children:"Drawing"}),e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#333"},children:h.data.drawingNumber})]})}),e.jsx(y,{size:{xs:6,sm:3},children:e.jsxs(r,{sx:{textAlign:"center",p:1},children:[e.jsx(s,{variant:"caption",color:"textSecondary",sx:{display:"block",mb:.5},children:"Model"}),e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#333"},children:h.data.model||"N/A"})]})})]})]})}),e.jsx(d,{sx:{borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(c,{sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(T,{sx:{color:"#666",mr:2,fontSize:"1.25rem"}}),e.jsxs(r,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Production Setup"}),e.jsx(s,{variant:"body2",sx:{color:"#666"},children:"Configure production parameters and equipment"})]})]}),e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:6},children:e.jsx($,{name:"productionSetId",control:ie,render:({field:r})=>e.jsx(x,{...r,fullWidth:!0,label:"Production Set ID",required:!0,placeholder:"e.g., PROD-001",error:!!ce.productionSetId,helperText:ce.productionSetId?.message,disabled:te||_,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx($,{name:"mouldId",control:ie,render:({field:r})=>e.jsx(x,{...r,fullWidth:!0,label:"Mould ID",required:!0,placeholder:"e.g., MOULD-01",error:!!ce.mouldId,helperText:ce.mouldId?.message,disabled:te||_,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})})})]})]})}),e.jsx(d,{sx:{borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(c,{sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(n,{sx:{color:"#666",mr:2,fontSize:"1.25rem"}}),e.jsxs(r,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:"Schedule & Details"}),e.jsx(s,{variant:"body2",sx:{color:"#666"},children:"Set timing and additional information"})]})]}),e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:6},children:e.jsx(M,{label:"Date",value:H,onChange:e=>U(e||L()),disabled:te||_,slotProps:{textField:{fullWidth:!0,error:!!ce.date,helperText:ce.date?.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}}})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx($,{name:"shift",control:ie,render:({field:r})=>e.jsxs(z,{fullWidth:!0,error:!!ce.shift,children:[e.jsx(E,{children:"Shift"}),e.jsx(w,{...r,label:"Shift",disabled:te||_,sx:{borderRadius:"8px"},children:se.map(r=>e.jsx(R,{value:r.value,children:r.label},r.value))}),ce.shift&&e.jsx(s,{variant:"caption",color:"error",sx:{mt:.5,ml:1.75},children:ce.shift.message})]})})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx($,{name:"inCharge",control:ie,render:({field:r})=>e.jsx(x,{...r,fullWidth:!0,label:"In Charge",type:"number",required:!0,placeholder:"e.g., 1",error:!!ce.inCharge,helperText:ce.inCharge?.message,disabled:te||_,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),e.jsx(y,{size:{xs:12},children:e.jsx($,{name:"remarks",control:ie,render:({field:r})=>e.jsx(x,{...r,fullWidth:!0,label:"Remarks",multiline:!0,rows:3,placeholder:"Additional notes about this execution...",error:!!ce.remarks,helperText:ce.remarks?.message,disabled:te||_,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})})]})]})})]})]}),e.jsxs(A,{sx:{p:3,pt:1,borderTop:"1px solid #e0e0e0"},children:[e.jsx(o,{onClick:ue,disabled:te||_,sx:{borderRadius:"8px",textTransform:"none",fontWeight:500},children:"Cancel"}),e.jsx(o,{onClick:ae(async e=>{if(h&&H&&N){B(!0);try{const r={data:{customer:e.customer,partId:e.partId,catalyst:h.data.catalyst,partNumber:h.data.partNumber,partDescription:h.data.description,version:h.data.version,productionSetId:e.productionSetId,mouldId:e.mouldId,date:H?H.format("YYYY-MM-DD"):L().format("YYYY-MM-DD"),shift:e.shift,inCharge:e.inCharge,remarks:e.remarks||"",drawingNumber:h.data.drawingNumber,status:"ACTIVE",prcTemplate:h.data.prcTemplate,plantCode:e.plantCode}};await oe(r).unwrap(),u(),l()}catch(r){}finally{B(!1)}}}),variant:"contained",disabled:te||_||!h||!N,startIcon:_?void 0:e.jsx(i,{}),sx:{backgroundColor:"#1976d2",borderRadius:"8px",textTransform:"none",fontWeight:500,px:3,py:1,"&:hover":{backgroundColor:"#1565c0"}},children:_?"Creating...":"Create Execution"})]})]})})},te=()=>{const t=W(),[i,a]=D.useState(""),[n,l]=D.useState("All Executions"),[d,c]=D.useState(!1),[x,u]=D.useState(null),[h,p]=D.useState(!1),{data:m,isLoading:b,isFetching:f,refetch:C}=_(),S=D.useMemo(()=>m&&m?.data||[],[m]),I=D.useMemo(()=>{let e=S;return"All Executions"!==n&&("Active"===n?e=e.filter(e=>"ACTIVE"===e.status):"In Progress"===n?e=e.filter(e=>"IN_PROGRESS"===e.status):"Completed"===n?e=e.filter(e=>"COMPLETED"===e.status):"Inactive"===n&&(e=e.filter(e=>"INACTIVE"===e.status))),i&&(e=e.filter(e=>e.partNumber.toLowerCase().includes(i.toLowerCase())||e.customer.toLowerCase().includes(i.toLowerCase())||e.productionSetId.toLowerCase().includes(i.toLowerCase())||e.mouldId.toLowerCase().includes(i.toLowerCase()))),e},[S,n,i]),y=()=>{p(!0)},z=()=>{c(!1),u(null)},E={ACTIVE:S.filter(e=>"ACTIVE"===e.status).length,INACTIVE:S.filter(e=>"INACTIVE"===e.status).length,IN_PROGRESS:S.filter(e=>"IN_PROGRESS"===e.status).length,COMPLETED:S.filter(e=>"COMPLETED"===e.status).length};return b||f?e.jsxs(r,{sx:{p:3,backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[e.jsx(J,{onCreateClick:y}),e.jsx(O,{})]}):e.jsxs(r,{sx:{p:3,backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[e.jsx(J,{onCreateClick:y}),e.jsx(Z,{headerData:E}),e.jsx(Q,{onSearchChange:e=>{a(e)},onFilterChange:e=>{l(e)}}),e.jsx(ee,{data:I,onExecute:e=>{t(`/prc-execution/execute/${e}`)}}),e.jsx(oe,{open:h,onClose:()=>p(!1),onSuccess:()=>{C()}}),e.jsxs(j,{open:d,onClose:z,maxWidth:"sm",fullWidth:!0,children:[e.jsx(g,{children:"Delete PRC Execution"}),e.jsx(v,{children:e.jsxs(s,{children:["Are you sure you want to delete the PRC execution for ",e.jsx("strong",{children:x?.partNumber}),"? This will set the status to INACTIVE and preserve all remaining data."]})}),e.jsxs(A,{children:[e.jsx(o,{onClick:z,children:"Cancel"}),e.jsx(o,{onClick:async()=>{c(!1),u(null)},color:"error",variant:"contained",children:"Delete Execution"})]})]})]})};export{te as default};
